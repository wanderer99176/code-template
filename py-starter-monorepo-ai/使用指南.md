# ä¼ä¸šçº§å…¨æ ˆ AI åº”ç”¨ Monorepo æ¨¡æ¿ä½¿ç”¨æŒ‡å—

> ğŸ“š æœ¬æŒ‡å—å°†æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿åˆ›å»ºã€å¼€å‘å’Œéƒ¨ç½²ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§å…¨æ ˆ AI åº”ç”¨

## ğŸ“‹ ç›®å½•

- [ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡](#ç¬¬ä¸€æ­¥ç¯å¢ƒå‡†å¤‡)
- [ç¬¬äºŒæ­¥ï¼šåˆ›å»ºé¡¹ç›®](#ç¬¬äºŒæ­¥åˆ›å»ºé¡¹ç›®)
- [ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®](#ç¬¬ä¸‰æ­¥åˆå§‹åŒ–é¡¹ç›®)
- [ç¬¬å››æ­¥ï¼šå¯åŠ¨å¼€å‘ç¯å¢ƒ](#ç¬¬å››æ­¥å¯åŠ¨å¼€å‘ç¯å¢ƒ)
- [ç¬¬äº”æ­¥ï¼šå¼€å‘å·¥ä½œæµ](#ç¬¬äº”æ­¥å¼€å‘å·¥ä½œæµ)
- [ç¬¬å…­æ­¥ï¼šæœ¬åœ°æµ‹è¯•](#ç¬¬å…­æ­¥æœ¬åœ°æµ‹è¯•)
- [ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ](#ç¬¬ä¸ƒæ­¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ)
- [ç¬¬å…«æ­¥ï¼šç›‘æ§å’Œç»´æŠ¤](#ç¬¬å…«æ­¥ç›‘æ§å’Œç»´æŠ¤)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

### 1.1 æ£€æŸ¥ç³»ç»Ÿè¦æ±‚

ç¡®ä¿ä½ çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, æˆ– Linux
- **å†…å­˜**: è‡³å°‘ 8GB RAMï¼ˆæ¨è 16GBï¼‰
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 20GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### 1.2 å®‰è£…å¿…è¦å·¥å…·

#### å®‰è£… Python 3.11.9

**macOS/Linux:**
```bash
# ä½¿ç”¨ pyenvï¼ˆæ¨èï¼‰
curl https://pyenv.run | bash
pyenv install 3.11.9
pyenv global 3.11.9

# éªŒè¯å®‰è£…
python --version  # åº”è¯¥æ˜¾ç¤º Python 3.11.9
```

**Windows:**
```powershell
# ä¸‹è½½å¹¶å®‰è£… Python 3.11.9
# è®¿é—®: https://www.python.org/downloads/release/python-3119/
# æˆ–ä½¿ç”¨ Scoop
scoop install python@3.11.9

# éªŒè¯å®‰è£…
python --version
```

#### å®‰è£… Node.js 20.x

**macOS/Linux:**
```bash
# ä½¿ç”¨ nvmï¼ˆæ¨èï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20

# éªŒè¯å®‰è£…
node --version  # åº”è¯¥æ˜¾ç¤º v20.x.x
```

**Windows:**
```powershell
# ä½¿ç”¨ nvm-windows
# ä¸‹è½½: https://github.com/coreybutler/nvm-windows/releases
# æˆ–ä½¿ç”¨ Scoop
scoop install nvm
nvm install 20
nvm use 20

# éªŒè¯å®‰è£…
node --version
```

#### å®‰è£… pnpm

```bash
# ä½¿ç”¨ npm å®‰è£…
npm install -g pnpm

# æˆ–ä½¿ç”¨ Homebrew (macOS)
brew install pnpm

# éªŒè¯å®‰è£…
pnpm --version  # åº”è¯¥æ˜¾ç¤º 8.x æˆ–æ›´é«˜
```

#### å®‰è£… uv (Python åŒ…ç®¡ç†å™¨)

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# æˆ–ä½¿ç”¨ pip
pip install uv

# éªŒè¯å®‰è£…
uv --version
```

#### å®‰è£… Docker

**macOS:**
```bash
# ä¸‹è½½ Docker Desktop
# è®¿é—®: https://www.docker.com/products/docker-desktop/

# æˆ–ä½¿ç”¨ Homebrew
brew install --cask docker
```

**Windows:**
```powershell
# ä¸‹è½½ Docker Desktop
# è®¿é—®: https://www.docker.com/products/docker-desktop/

# æˆ–ä½¿ç”¨ Scoop
scoop install docker
```

**Linux (Ubuntu/Debian):**
```bash
# å®‰è£… Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# æ·»åŠ å½“å‰ç”¨æˆ·åˆ° docker ç»„
sudo usermod -aG docker $USER

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

#### å®‰è£… Just (å¯é€‰ï¼Œä½†æ¨è)

```bash
# macOS
brew install just

# Windows (Scoop)
scoop install just

# Linux
cargo install just

# éªŒè¯å®‰è£…
just --version
```

#### å®‰è£… Git

```bash
# macOS
brew install git

# Windows
scoop install git

# Ubuntu/Debian
sudo apt-get install git

# éªŒè¯å®‰è£…
git --version
```

### 1.3 éªŒè¯æ‰€æœ‰å·¥å…·

è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®ä¿æ‰€æœ‰å·¥å…·éƒ½å·²æ­£ç¡®å®‰è£…ï¼š

```bash
# æ£€æŸ¥ç‰ˆæœ¬
python --version    # Python 3.11.9
node --version      # v20.x.x
pnpm --version      # 8.x+
uv --version        # 0.x.x
docker --version    # 24.x+
git --version       # 2.x+
just --version      # 1.x+ (å¯é€‰)
```

---

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºé¡¹ç›®

### 2.1 å®‰è£… Cookiecutter

```bash
# ä½¿ç”¨ pipx å®‰è£…ï¼ˆæ¨èï¼Œéš”ç¦»ç¯å¢ƒï¼‰
pip install pipx
pipx install cookiecutter

# æˆ–ä½¿ç”¨ pip ç›´æ¥å®‰è£…
pip install cookiecutter

# éªŒè¯å®‰è£…
cookiecutter --version
```

### 2.2 ä»æ¨¡æ¿åˆ›å»ºé¡¹ç›®

#### æ–¹å¼ 1: ä» GitHub åˆ›å»ºï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir ~/projects
cd ~/projects

# ä» GitHub ä»“åº“åˆ›å»ºé¡¹ç›®
cookiecutter gh:wanderer99176/code-template --directory py-starter-monorepo-ai
```

#### æ–¹å¼ 2: ä»æœ¬åœ°è·¯å¾„åˆ›å»º

```bash
# å¦‚æœå·²ç»å…‹éš†äº†æ¨¡æ¿ä»“åº“
cd ~/projects
cookiecutter /path/to/code-template/py-starter-monorepo-ai
```

### 2.3 å¡«å†™é¡¹ç›®ä¿¡æ¯

Cookiecutter ä¼šæç¤ºä½ è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
[1/22] project_name (My Enterprise AI App): 
# è¾“å…¥: æˆ‘çš„AIåº”ç”¨å¹³å°

[2/22] project_slug (my-enterprise-ai-app): 
# è¾“å…¥: my-ai-platform (ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå¯ç›´æ¥å›è½¦)

[3/22] package_name (my_enterprise_ai_app): 
# è¾“å…¥: my_ai_platform (Python åŒ…åï¼Œå¯ç›´æ¥å›è½¦)

[4/22] scraper_name (my_enterprise_ai_app_scraper): 
# è¾“å…¥: my_ai_platform_scraper (å¯ç›´æ¥å›è½¦)

[5/22] author_name (Your Name): 
# è¾“å…¥: å¼ ä¸‰

[6/22] author_email (your.email@example.com): 
# è¾“å…¥: zhangsan@example.com

[7/22] description (ä¼ä¸šçº§å…¨æ ˆ AI åº”ç”¨ Monorepo): 
# è¾“å…¥: æ™ºèƒ½æ•°æ®åˆ†æå¹³å° (æˆ–å…¶ä»–æè¿°)

[8/22] version (0.1.0): 
# è¾“å…¥: ç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤å€¼

[9/22] python_version (3.11.9): 
# è¾“å…¥: ç›´æ¥å›è½¦

[10/22] node_version (20.x): 
# è¾“å…¥: ç›´æ¥å›è½¦

[11/22] Select license:
  1 - MIT
  2 - Apache-2.0
  3 - BSD-3-Clause
  4 - GPL-3.0
Choose from [1/2/3/4] (1): 
# è¾“å…¥: 1 (é€‰æ‹© MIT è®¸å¯è¯)

[12/22] database_name (my_enterprise_ai_app_db): 
# è¾“å…¥: ç›´æ¥å›è½¦

[13/22] database_user (my_enterprise_ai_app_user): 
# è¾“å…¥: ç›´æ¥å›è½¦

[14/22] github_username (your-github-username): 
# è¾“å…¥: zhangsan (ä½ çš„ GitHub ç”¨æˆ·å)

[15/22] docker_registry (ghcr.io): 
# è¾“å…¥: ç›´æ¥å›è½¦ (æˆ–æ”¹ä¸º docker.io)

[16/22] kubernetes_namespace (my-enterprise-ai-app): 
# è¾“å…¥: ç›´æ¥å›è½¦

[17/22] domain_name (example.com): 
# è¾“å…¥: myaiplatform.com (ä½ çš„åŸŸå)

[18/22] Select use_gpu:
  1 - yes
  2 - no
Choose from [1/2] (1): 
# è¾“å…¥: 1 (å¦‚æœéœ€è¦ GPU) æˆ– 2

[19/22] Select enable_monitoring:
  1 - yes
  2 - no
Choose from [1/2] (1): 
# è¾“å…¥: 1 (æ¨èå¼€å¯ç›‘æ§)

[20/22] Select enable_scraper:
  1 - yes
  2 - no
Choose from [1/2] (1): 
# è¾“å…¥: 1 (å¦‚æœéœ€è¦çˆ¬è™«) æˆ– 2

[21/22] Select enable_ml_api:
  1 - yes
  2 - no
Choose from [1/2] (1): 
# è¾“å…¥: 1 (å¦‚æœéœ€è¦æœºå™¨å­¦ä¹  API) æˆ– 2

[22/22] Select enable_audio_api:
  1 - yes
  2 - no
Choose from [1/2] (1): 
# è¾“å…¥: 1 (å¦‚æœéœ€è¦è¯­éŸ³è¯†åˆ« API) æˆ– 2
```

### 2.4 éªŒè¯é¡¹ç›®åˆ›å»º

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-ai-platform

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
tree -L 2  # macOS/Linux
# æˆ–
dir /s /b  # Windows

# åº”è¯¥çœ‹åˆ°å®Œæ•´çš„é¡¹ç›®ç»“æ„
```

---

## ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–é¡¹ç›®

### 3.1 ä½¿ç”¨ Just è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-ai-platform

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
just --list

# è¿è¡Œåˆå§‹åŒ–
just init
```

`just init` ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š
1. âœ… æ£€æŸ¥æ‰€æœ‰å¿…éœ€çš„å·¥å…·ï¼ˆPython, Node.js, Docker ç­‰ï¼‰
2. âœ… å®‰è£… pnpm ä¾èµ–
3. âœ… ä¸ºæ¯ä¸ª Python æœåŠ¡åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆä½¿ç”¨ uvï¼‰
4. âœ… å®‰è£… Python ä¾èµ–
5. âœ… è®¾ç½® pre-commit hooks
6. âœ… åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆ.envï¼‰
7. âœ… å¯åŠ¨ Docker Compose åŸºç¡€æœåŠ¡
8. âœ… è¿è¡Œæ•°æ®åº“è¿ç§»

### 3.2 æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆå¦‚æœæ²¡æœ‰ Justï¼‰

#### æ­¥éª¤ 1: å®‰è£… Node.js ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ pnpm workspace ä¾èµ–
pnpm install
```

#### æ­¥éª¤ 2: å®‰è£… Python ä¾èµ–

```bash
# Backend æœåŠ¡
cd services/backend
uv venv
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate  # Windows
uv pip install -e .
cd ../..

# ML API æœåŠ¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
cd services/ml-api
uv venv
source .venv/bin/activate
uv pip install -e .
cd ../..

# Audio API æœåŠ¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
cd services/audio-api
uv venv
source .venv/bin/activate
uv pip install -e .
cd ../..

# Scraper æœåŠ¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
cd services/scraper
uv venv
source .venv/bin/activate
uv pip install -e .
cd ../..
```

#### æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»º .env æ–‡ä»¶
cp .env.example .env  # å¦‚æœæœ‰ç¤ºä¾‹æ–‡ä»¶

# æˆ–æ‰‹åŠ¨åˆ›å»º
cat > .env << 'EOF'
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://my_ai_platform_user:changeme@localhost:5432/my_ai_platform_db

# Redis é…ç½®
REDIS_URL=redis://localhost:6379/0

# JWT é…ç½®
SECRET_KEY=your-super-secret-key-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# åº”ç”¨é…ç½®
ENVIRONMENT=development
LOG_LEVEL=DEBUG
CORS_ORIGINS=http://localhost:3000

# MinIO (S3 å…¼å®¹)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ENDPOINT=localhost:9000

# ç›‘æ§é…ç½®ï¼ˆå¯é€‰ï¼‰
PROMETHEUS_ENABLED=true
JAEGER_ENABLED=true
EOF
```

#### æ­¥éª¤ 4: è®¾ç½® Pre-commit Hooks

```bash
# å®‰è£… pre-commit
pip install pre-commit

# å®‰è£… git hooks
pre-commit install

# æµ‹è¯• hooksï¼ˆå¯é€‰ï¼‰
pre-commit run --all-files
```

#### æ­¥éª¤ 5: å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡

```bash
# å¯åŠ¨ PostgreSQLã€Redisã€MinIO
docker-compose -f infra/docker-compose/dev.yml up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆçº¦ 10-20 ç§’ï¼‰
sleep 20

# éªŒè¯æœåŠ¡çŠ¶æ€
docker-compose -f infra/docker-compose/dev.yml ps
```

#### æ­¥éª¤ 6: è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# è¿›å…¥ backend ç›®å½•
cd services/backend

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate  # Windows

# è¿è¡Œè¿ç§»
alembic upgrade head

# è¿”å›æ ¹ç›®å½•
cd ../..
```

---

## ç¬¬å››æ­¥ï¼šå¯åŠ¨å¼€å‘ç¯å¢ƒ

### 4.1 ä½¿ç”¨ Just å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰å¼€å‘æœåŠ¡
just dev

# è¿™ä¼šè‡ªåŠ¨å¯åŠ¨ï¼š
# - Backend API (http://localhost:8000)
# - Frontend (http://localhost:3000)
# - ML API (http://localhost:8001) - å¦‚æœå¯ç”¨
# - Audio API (http://localhost:8002) - å¦‚æœå¯ç”¨
```

### 4.2 æ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡

#### å¯åŠ¨ Backend

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd services/backend
source .venv/bin/activate
uvicorn my_ai_platform.main:app --reload --host 0.0.0.0 --port 8000
```

#### å¯åŠ¨ Frontend

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd services/frontend
pnpm dev
```

#### å¯åŠ¨ ML APIï¼ˆå¦‚æœå¯ç”¨ï¼‰

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd services/ml-api
source .venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8001
```

#### å¯åŠ¨ Audio APIï¼ˆå¦‚æœå¯ç”¨ï¼‰

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd services/audio-api
source .venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8002
```

### 4.3 éªŒè¯æœåŠ¡è¿è¡Œ

è®¿é—®ä»¥ä¸‹ URL éªŒè¯æœåŠ¡ï¼š

- **Frontend**: http://localhost:3000
- **Backend API Docs**: http://localhost:8000/docs
- **Backend Health**: http://localhost:8000/health/live
- **ML API Docs**: http://localhost:8001/docs (å¦‚æœå¯ç”¨)
- **Audio API Docs**: http://localhost:8002/docs (å¦‚æœå¯ç”¨)

### 4.4 å¯åŠ¨ç›‘æ§æœåŠ¡ï¼ˆå¯é€‰ï¼‰

```bash
# ä½¿ç”¨ Just
just monitoring-up

# æˆ–ä½¿ç”¨ Docker Compose
docker-compose -f infra/docker-compose/monitoring.yml up -d

# è®¿é—®ç›‘æ§é¢æ¿
# Grafana: http://localhost:3001 (admin/admin)
# Prometheus: http://localhost:9090
# Jaeger: http://localhost:16686
```

---

## ç¬¬äº”æ­¥ï¼šå¼€å‘å·¥ä½œæµ

### 5.1 æ·»åŠ æ–°çš„ API ç«¯ç‚¹

#### æ­¥éª¤ 1: åˆ›å»ºç«¯ç‚¹æ–‡ä»¶

```bash
# åœ¨ backend ä¸­åˆ›å»ºæ–°ç«¯ç‚¹
cd services/backend/src/my_ai_platform/api/v1/endpoints

# åˆ›å»ºæ–°ç«¯ç‚¹æ–‡ä»¶
cat > products.py << 'EOF'
"""
äº§å“ç®¡ç†ç«¯ç‚¹
"""
from fastapi import APIRouter, Depends, HTTPException
from typing import List

router = APIRouter()

@router.get("/products")
async def get_products():
    """è·å–æ‰€æœ‰äº§å“"""
    return {"products": []}

@router.get("/products/{product_id}")
async def get_product(product_id: int):
    """è·å–å•ä¸ªäº§å“"""
    return {"id": product_id, "name": "ç¤ºä¾‹äº§å“"}

@router.post("/products")
async def create_product(product: dict):
    """åˆ›å»ºæ–°äº§å“"""
    return {"id": 1, **product}
EOF
```

#### æ­¥éª¤ 2: æ³¨å†Œè·¯ç”±

```bash
# ç¼–è¾‘ router.py
cd services/backend/src/my_ai_platform/api/v1

# åœ¨ router.py ä¸­æ·»åŠ 
```

```python
# api/v1/router.py
from fastapi import APIRouter
from .endpoints import auth, users, health, products  # æ·»åŠ  products

api_router = APIRouter()

api_router.include_router(auth.router, prefix="/auth", tags=["è®¤è¯"])
api_router.include_router(users.router, prefix="/users", tags=["ç”¨æˆ·"])
api_router.include_router(health.router, prefix="/health", tags=["å¥åº·æ£€æŸ¥"])
api_router.include_router(products.router, prefix="/products", tags=["äº§å“"])  # æ–°å¢
```

#### æ­¥éª¤ 3: ç”Ÿæˆ TypeScript ç±»å‹

```bash
# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ~/projects/my-ai-platform

# ç”Ÿæˆç±»å‹å®šä¹‰
just codegen

# æˆ–ä½¿ç”¨ pnpm
pnpm codegen
```

#### æ­¥éª¤ 4: åœ¨ Frontend ä½¿ç”¨æ–° API

```vue
<!-- services/frontend/pages/products.vue -->
<script setup lang="ts">
import type { Product } from '@my-ai-platform/shared-types'

const { data: products } = await useFetch<Product[]>('/api/products')
</script>

<template>
  <div>
    <h1>äº§å“åˆ—è¡¨</h1>
    <ul>
      <li v-for="product in products" :key="product.id">
        {{ product.name }}
      </li>
    </ul>
  </div>
</template>
```

### 5.2 æ·»åŠ æ•°æ®åº“æ¨¡å‹

#### æ­¥éª¤ 1: åˆ›å»ºæ¨¡å‹

```python
# services/backend/src/my_ai_platform/db/models.py
from sqlmodel import SQLModel, Field
from typing import Optional
from datetime import datetime

class Product(SQLModel, table=True):
    """äº§å“æ¨¡å‹"""
    id: Optional[int] = Field(default=None, primary_key=True)
    name: str = Field(index=True)
    description: str
    price: float
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```

#### æ­¥éª¤ 2: åˆ›å»ºè¿ç§»

```bash
# ä½¿ç”¨ Just
just db-migrate name="add_product_table"

# æˆ–æ‰‹åŠ¨
cd services/backend
source .venv/bin/activate
alembic revision --autogenerate -m "add_product_table"
```

#### æ­¥éª¤ 3: åº”ç”¨è¿ç§»

```bash
# ä½¿ç”¨ Just
just db-upgrade

# æˆ–æ‰‹åŠ¨
cd services/backend
source .venv/bin/activate
alembic upgrade head
```

### 5.3 ä»£ç è´¨é‡æ£€æŸ¥

```bash
# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
just lint          # Linting æ£€æŸ¥
just typecheck     # ç±»å‹æ£€æŸ¥
just format        # ä»£ç æ ¼å¼åŒ–

# è‡ªåŠ¨ä¿®å¤é—®é¢˜
just lint-fix

# æ¨¡æ‹Ÿ CI æµç¨‹ï¼ˆæ¨èåœ¨æäº¤å‰è¿è¡Œï¼‰
just ci
```

---

## ç¬¬å…­æ­¥ï¼šæœ¬åœ°æµ‹è¯•

### 6.1 è¿è¡Œå•å…ƒæµ‹è¯•

```bash
# ä½¿ç”¨ Just è¿è¡Œæ‰€æœ‰æµ‹è¯•
just test

# è¿è¡Œç‰¹å®šæœåŠ¡çš„æµ‹è¯•
cd services/backend
source .venv/bin/activate
pytest

# è¿è¡Œå‰ç«¯æµ‹è¯•
cd services/frontend
pnpm test
```

### 6.2 è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

```bash
# ä½¿ç”¨ Just
just test-cov

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
# Backend: services/backend/htmlcov/index.html
# Frontend: services/frontend/coverage/index.html
```

### 6.3 E2E æµ‹è¯•ï¼ˆå¦‚æœé…ç½®ï¼‰

```bash
# ç¡®ä¿æ‰€æœ‰æœåŠ¡éƒ½åœ¨è¿è¡Œ
just dev

# åœ¨æ–°ç»ˆç«¯è¿è¡Œ E2E æµ‹è¯•
pnpm test:e2e
```

---

## ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### 7.1 æœ¬åœ° Docker éƒ¨ç½²

#### æ­¥éª¤ 1: æ„å»º Docker é•œåƒ

```bash
# ä½¿ç”¨ Just
just docker-build

# æˆ–ä½¿ç”¨ Docker Compose
docker-compose build
```

#### æ­¥éª¤ 2: å¯åŠ¨åº”ç”¨æ ˆ

```bash
# å¯åŠ¨å®Œæ•´åº”ç”¨æ ˆ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

#### æ­¥éª¤ 3: è®¿é—®åº”ç”¨

- Frontend: http://localhost:3000
- Backend: http://localhost:8000

### 7.2 éƒ¨ç½²åˆ° Kubernetes

#### æ­¥éª¤ 1: å‡†å¤‡ Kubernetes é›†ç¾¤

**æœ¬åœ°æµ‹è¯•ï¼ˆä½¿ç”¨ Minikubeï¼‰ï¼š**
```bash
# å®‰è£… Minikube
brew install minikube  # macOS
# æˆ–
choco install minikube  # Windows

# å¯åŠ¨é›†ç¾¤
minikube start --cpus=4 --memory=8192

# éªŒè¯é›†ç¾¤
kubectl cluster-info
```

**æˆ–ä½¿ç”¨äº‘å¹³å°çš„ Kubernetesï¼ˆè§æ­¥éª¤ 7.3ï¼‰**

#### æ­¥éª¤ 2: éƒ¨ç½²æ ¸å¿ƒåŸºç¡€è®¾æ–½

```bash
# ä½¿ç”¨ Just
just k8s-apply

# æˆ–æ‰‹åŠ¨éƒ¨ç½²
kubectl apply -f infra/kubernetes/core-infra/

# éªŒè¯éƒ¨ç½²
kubectl get all -n my-ai-platform
```

#### æ­¥éª¤ 3: éƒ¨ç½²åº”ç”¨æœåŠ¡

```bash
# ä½¿ç”¨ Just
just k8s-deploy

# æˆ–ä½¿ç”¨ Helm
helm install backend ./infra/kubernetes/helm-charts/backend \
  --namespace my-ai-platform

helm install frontend ./infra/kubernetes/helm-charts/frontend \
  --namespace my-ai-platform
```

#### æ­¥éª¤ 4: éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹ Pods çŠ¶æ€
kubectl get pods -n my-ai-platform

# æŸ¥çœ‹æœåŠ¡
kubectl get svc -n my-ai-platform

# æŸ¥çœ‹ Ingress
kubectl get ingress -n my-ai-platform

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f deployment/backend -n my-ai-platform
```

#### æ­¥éª¤ 5: è®¿é—®åº”ç”¨

**ä½¿ç”¨ Minikube:**
```bash
# è·å–æœåŠ¡ URL
minikube service frontend -n my-ai-platform --url

# æˆ–ä½¿ç”¨ç«¯å£è½¬å‘
kubectl port-forward -n my-ai-platform svc/frontend 3000:3000
kubectl port-forward -n my-ai-platform svc/backend 8000:8000
```

### 7.3 éƒ¨ç½²åˆ° AWSï¼ˆä½¿ç”¨ Terraformï¼‰

#### æ­¥éª¤ 1: é…ç½® AWS å‡­è¯

```bash
# å®‰è£… AWS CLI
brew install awscli  # macOS
# æˆ–
pip install awscli

# é…ç½®å‡­è¯
aws configure
# AWS Access Key ID: <your-access-key>
# AWS Secret Access Key: <your-secret-key>
# Default region: us-west-2
# Default output format: json
```

#### æ­¥éª¤ 2: åˆ›å»º S3 åç«¯ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰

```bash
# åˆ›å»º Terraform çŠ¶æ€å­˜å‚¨æ¡¶
aws s3 mb s3://my-ai-platform-terraform-state --region us-west-2

# åˆ›å»º DynamoDB é”è¡¨
aws dynamodb create-table \
  --table-name my-ai-platform-terraform-locks \
  --attribute-definitions AttributeName=LockID,AttributeType=S \
  --key-schema AttributeName=LockID,KeyType=HASH \
  --billing-mode PAY_PER_REQUEST \
  --region us-west-2
```

#### æ­¥éª¤ 3: åˆå§‹åŒ– Terraform

```bash
# è¿›å…¥ Terraform ç›®å½•
cd infra/tofu

# åˆå§‹åŒ–ï¼ˆä½¿ç”¨ Justï¼‰
just tf-init

# æˆ–æ‰‹åŠ¨
tofu init
```

#### æ­¥éª¤ 4: æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’

```bash
# ä½¿ç”¨ Just
just tf-plan

# æˆ–æ‰‹åŠ¨
tofu plan

# ä¿å­˜è®¡åˆ’åˆ°æ–‡ä»¶
tofu plan -out=tfplan
```

#### æ­¥éª¤ 5: åº”ç”¨å˜æ›´ï¼ˆåˆ›å»ºåŸºç¡€è®¾æ–½ï¼‰

```bash
# ä½¿ç”¨ Just
just tf-apply

# æˆ–æ‰‹åŠ¨
tofu apply

# åº”ç”¨å·²ä¿å­˜çš„è®¡åˆ’
tofu apply tfplan
```

**é¢„è®¡åˆ›å»ºæ—¶é—´**: 15-20 åˆ†é’Ÿ

**åˆ›å»ºçš„èµ„æº**:
- VPC ç½‘ç»œï¼ˆå­ç½‘ã€è·¯ç”±è¡¨ã€NAT Gatewayï¼‰
- EKS Kubernetes é›†ç¾¤
- RDS PostgreSQL æ•°æ®åº“ï¼ˆMulti-AZï¼‰
- ElastiCache Redis é›†ç¾¤
- S3 å­˜å‚¨æ¡¶
- IAM è§’è‰²å’Œç­–ç•¥

#### æ­¥éª¤ 6: é…ç½® kubectl

```bash
# è·å– EKS å‡­è¯
aws eks update-kubeconfig --region us-west-2 --name my-ai-platform-cluster

# éªŒè¯è¿æ¥
kubectl get nodes

# æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯
kubectl cluster-info
```

#### æ­¥éª¤ 7: éƒ¨ç½²åº”ç”¨åˆ° EKS

```bash
# éƒ¨ç½²æ ¸å¿ƒåŸºç¡€è®¾æ–½
kubectl apply -f infra/kubernetes/core-infra/

# éƒ¨ç½²åº”ç”¨æœåŠ¡
helm install backend ./infra/kubernetes/helm-charts/backend
helm install frontend ./infra/kubernetes/helm-charts/frontend

# æˆ–ä½¿ç”¨ Just
just k8s-apply
just k8s-deploy
```

#### æ­¥éª¤ 8: è·å–åº”ç”¨è®¿é—®åœ°å€

```bash
# è·å– Ingress åœ°å€
kubectl get ingress -n my-ai-platform

# è¾“å‡ºç¤ºä¾‹:
# NAME       CLASS    HOSTS                    ADDRESS                                    
# backend    traefik  api.myaiplatform.com    a1234567890.us-west-2.elb.amazonaws.com
# frontend   traefik  myaiplatform.com        a1234567890.us-west-2.elb.amazonaws.com

# é…ç½® DNS
# å°† myaiplatform.com å’Œ api.myaiplatform.com çš„ CNAME è®°å½•æŒ‡å‘ ELB åœ°å€
```

#### æ­¥éª¤ 9: éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æ‰€æœ‰èµ„æº
kubectl get all -n my-ai-platform

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
kubectl logs -f deployment/backend -n my-ai-platform

# è®¿é—®åº”ç”¨
# https://myaiplatform.com
# https://api.myaiplatform.com/docs
```

---

## ç¬¬å…«æ­¥ï¼šç›‘æ§å’Œç»´æŠ¤

### 8.1 æŸ¥çœ‹åº”ç”¨æ—¥å¿—

```bash
# ä½¿ç”¨ Just
just logs backend

# æˆ–ä½¿ç”¨ kubectl
kubectl logs -f deployment/backend -n my-ai-platform

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
kubectl logs --tail=100 deployment/backend -n my-ai-platform

# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¥å¿—
kubectl logs -f deployment/backend -n my-ai-platform --all-containers
```

### 8.2 è®¿é—®ç›‘æ§é¢æ¿

**Grafanaï¼ˆå¯è§†åŒ–ï¼‰:**
- URL: http://localhost:3001 (æœ¬åœ°) æˆ– https://grafana.myaiplatform.com
- é»˜è®¤ç™»å½•: admin / admin
- æŸ¥çœ‹é¢„é…ç½®çš„ä»ªè¡¨æ¿

**Prometheusï¼ˆæŒ‡æ ‡ï¼‰:**
- URL: http://localhost:9090 (æœ¬åœ°)
- æŸ¥è¯¢åº”ç”¨æŒ‡æ ‡

**Jaegerï¼ˆè¿½è¸ªï¼‰:**
- URL: http://localhost:16686 (æœ¬åœ°)
- æŸ¥çœ‹åˆ†å¸ƒå¼è¿½è¸ªä¿¡æ¯

### 8.3 æ•°æ®åº“å¤‡ä»½

```bash
# ä½¿ç”¨ Justï¼ˆè‡ªåŠ¨å¤‡ä»½åˆ° S3ï¼‰
just db-backup

# æˆ–æ‰‹åŠ¨å¤‡ä»½
docker-compose exec postgres pg_dump -U my_ai_platform_user my_ai_platform_db > backup.sql

# æ¢å¤å¤‡ä»½
docker-compose exec -T postgres psql -U my_ai_platform_user my_ai_platform_db < backup.sql
```

### 8.4 æ›´æ–°åº”ç”¨

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. å®‰è£…æ–°ä¾èµ–
pnpm install
cd services/backend && uv pip install -e . && cd ../..

# 3. è¿è¡Œè¿ç§»
just db-upgrade

# 4. é‡æ–°æ„å»ºé•œåƒ
just docker-build

# 5. æ›´æ–° Kubernetes éƒ¨ç½²
kubectl rollout restart deployment/backend -n my-ai-platform
kubectl rollout restart deployment/frontend -n my-ai-platform

# 6. æŸ¥çœ‹æ›´æ–°çŠ¶æ€
kubectl rollout status deployment/backend -n my-ai-platform
```

### 8.5 æ‰©ç¼©å®¹

```bash
# æ‰‹åŠ¨æ‰©å®¹
kubectl scale deployment/backend --replicas=5 -n my-ai-platform

# æŸ¥çœ‹ HPA è‡ªåŠ¨æ‰©ç¼©å®¹çŠ¶æ€
kubectl get hpa -n my-ai-platform

# è°ƒæ•´ HPA é…ç½®
kubectl edit hpa backend-hpa -n my-ai-platform
```

### 8.6 æ€§èƒ½ä¼˜åŒ–

#### æŸ¥çœ‹èµ„æºä½¿ç”¨

```bash
# æŸ¥çœ‹ Pod èµ„æºä½¿ç”¨
kubectl top pods -n my-ai-platform

# æŸ¥çœ‹èŠ‚ç‚¹èµ„æºä½¿ç”¨
kubectl top nodes
```

#### ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ä¼˜åŒ–**:
   - æ·»åŠ ç´¢å¼•
   - ä½¿ç”¨è¿æ¥æ± 
   - å¯ç”¨æŸ¥è¯¢ç¼“å­˜

2. **ç¼“å­˜ä¼˜åŒ–**:
   - ä½¿ç”¨ Redis ç¼“å­˜çƒ­æ•°æ®
   - é…ç½®åˆé€‚çš„è¿‡æœŸæ—¶é—´
   - ä½¿ç”¨ç¼“å­˜é¢„çƒ­

3. **å‰ç«¯ä¼˜åŒ–**:
   - å¯ç”¨ SSR/SSG
   - é…ç½® CDN
   - å‹ç¼©é™æ€èµ„æº

---

## å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
# macOS/Linux
lsof -i :3000
lsof -i :8000

# Windows
netstat -ano | findstr :3000

# æ€æ­»è¿›ç¨‹
kill -9 <PID>  # macOS/Linux
taskkill /PID <PID> /F  # Windows
```

### Q2: Docker æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Ÿ

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs -f <service-name>

# é‡æ–°å¯åŠ¨æœåŠ¡
docker-compose restart <service-name>

# æ¸…ç†å¹¶é‡å»º
docker-compose down -v
docker-compose up -d --build
```

### Q3: æ•°æ®åº“è¿ç§»å¤±è´¥ï¼Ÿ

```bash
# æŸ¥çœ‹è¿ç§»å†å²
cd services/backend
source .venv/bin/activate
alembic history

# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
alembic downgrade -1

# é‡æ–°è¿è¡Œè¿ç§»
alembic upgrade head

# å¦‚æœå‡ºç°å†²çªï¼Œæ‰‹åŠ¨ä¿®å¤è¿ç§»æ–‡ä»¶
```

### Q4: ç±»å‹ç”Ÿæˆå¤±è´¥ï¼Ÿ

```bash
# ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œ
curl http://localhost:8000/openapi.json

# æ‰‹åŠ¨ç”Ÿæˆç±»å‹
cd packages/shared-types
pnpm run codegen

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
cat index.ts
```

### Q5: Kubernetes éƒ¨ç½²å¤±è´¥ï¼Ÿ

```bash
# æŸ¥çœ‹ Pod äº‹ä»¶
kubectl describe pod <pod-name> -n my-ai-platform

# æŸ¥çœ‹ Pod æ—¥å¿—
kubectl logs <pod-name> -n my-ai-platform

# æ£€æŸ¥é…ç½®
kubectl get configmap -n my-ai-platform
kubectl get secret -n my-ai-platform

# é‡æ–°éƒ¨ç½²
kubectl delete pod <pod-name> -n my-ai-platform
```

### Q6: å¦‚ä½•æ¸…ç†æ‰€æœ‰èµ„æºï¼Ÿ

```bash
# åœæ­¢æœ¬åœ°å¼€å‘ç¯å¢ƒ
just dev-down

# åœæ­¢ Docker æœåŠ¡
docker-compose down -v
docker-compose -f infra/docker-compose/monitoring.yml down -v

# åˆ é™¤ Kubernetes èµ„æº
helm uninstall backend frontend -n my-ai-platform
kubectl delete namespace my-ai-platform

# é”€æ¯ AWS åŸºç¡€è®¾æ–½ï¼ˆâš ï¸ è°¨æ…æ“ä½œï¼‰
cd infra/tofu
just tf-destroy
# æˆ–
tofu destroy
```

### Q7: å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ï¼Ÿ

```bash
# æŸ¥çœ‹ Just å‘½ä»¤
just --list

# æŸ¥çœ‹ Make å‘½ä»¤
make help

# æŸ¥çœ‹ pnpm è„šæœ¬
pnpm run
```

---

## ğŸ“š è¿›ä¸€æ­¥å­¦ä¹ 

### æ¨èèµ„æº

1. **å®˜æ–¹æ–‡æ¡£**:
   - [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)
   - [Nuxt 3 æ–‡æ¡£](https://nuxt.com/)
   - [Kubernetes æ–‡æ¡£](https://kubernetes.io/docs/)
   - [Terraform æ–‡æ¡£](https://www.terraform.io/docs/)

2. **é¡¹ç›®æ–‡æ¡£**:
   - [ç¯å¢ƒæ­å»ºæŒ‡å—]({{ cookiecutter.project_slug }}/docs/setup-guide.md)
   - [éƒ¨ç½²æ‰‹å†Œ]({{ cookiecutter.project_slug }}/docs/deployment.md)
   - [æ¶æ„å†³ç­–]({{ cookiecutter.project_slug }}/docs/adr/)

3. **æœ€ä½³å®è·µ**:
   - [Monorepo æœ€ä½³å®è·µ](https://monorepo.tools/)
   - [12-Factor App](https://12factor.net/)
   - [Kubernetes æœ€ä½³å®è·µ](https://kubernetes.io/docs/concepts/configuration/overview/)

---

## ğŸ‰ ä¸‹ä¸€æ­¥

æ­å–œï¼ä½ å·²ç»æˆåŠŸåˆ›å»ºå¹¶éƒ¨ç½²äº†ä¸€ä¸ªä¼ä¸šçº§å…¨æ ˆ AI åº”ç”¨ã€‚æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š

1. ğŸ”§ **å®šåˆ¶åŠŸèƒ½**: æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ·»åŠ æ–°çš„ API ç«¯ç‚¹å’Œé¡µé¢
2. ğŸ¨ **ä¼˜åŒ– UI**: ä½¿ç”¨ UI Kit ç»„ä»¶åº“ç¾åŒ–å‰ç«¯ç•Œé¢
3. ğŸ¤– **é›†æˆ AI**: åˆ©ç”¨ ML API å’Œ Audio API æ„å»ºæ™ºèƒ½åŠŸèƒ½
4. ğŸ“Š **é…ç½®ç›‘æ§**: è®¾ç½® Grafana å‘Šè­¦å’Œè‡ªå®šä¹‰ä»ªè¡¨æ¿
5. ğŸš€ **æŒç»­ä¼˜åŒ–**: æ ¹æ®ç›‘æ§æ•°æ®ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£æˆ–æäº¤ Issueã€‚

