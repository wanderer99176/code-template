.
├── cookiecutter.json
└── {{ cookiecutter.project_slug }}/
    ├── .github/
    │   ├── ISSUE_TEMPLATE/
    │   │   ├── bug_report.md
    │   │   └── feature_request.md
    │   ├── workflows/
    │   │   ├── ci.yml
    │   │   └── publish.yml
    │   └── PULL_REQUEST_TEMPLATE.md
    ├── data/
    │   ├── processed/
    │   │   └── .gitkeep
    │   └── raw/
    │       └── .gitkeep
    ├── docs/
    │   ├── source/
    │   │   ├── _static/
    │   │   │   └── .gitkeep
    │   │   ├── _templates/
    │   │   │   └── .gitkeep
    │   │   ├── api/
    │   │   │   └── .gitkeep
    │   │   ├── conf.py
    │   │   └── index.rst
    │   └── Makefile
    ├── scripts/
    │   ├── lint.sh
    │   ├── run_dev_server.sh
    │   └── seed_db.py
    ├── src/
    │   └── {{ cookiecutter.package_name }}/
    │       ├── __init__.py
    │       ├── api/
    │       │   ├── __init__.py
    │       │   └── v1/
    │       │       ├── __init__.py
    │       │       └── endpoints.py
    │       ├── core/
    │       │   ├── __init__.py
    │       │   ├── models.py
    │       │   └── services.py
    │       ├── db/
    │       │   ├── __init__.py
    │       │   ├── models.py
    │       │   └── session.py
    │       ├── config.py
    │       └── __main__.py
    ├── tests/
    │   ├── fixtures/
    │   │   └── sample_data.json
    │   ├── integration/
    │   │   └── test_api_endpoints.py
    │   ├── unit/
    │   │   └── core/
    │   │       └── test_services.py
    │   └── conftest.py
    ├── .dockerignore
    ├── .env.example
    ├── .gitignore
    ├── CHANGELOG.md
    ├── CONTRIBUTING.md
    ├── Dockerfile
    ├── LICENSE
    ├── Makefile
    ├── pyproject.toml
    └── README.md
(注意: .git/ 和 .venv/ 等目录不应包含在模板本身中)


### **最终的 `cookiecutter.json` 内容**

```json
{
    "project_name": "My Awesome Project",
    "project_slug": "{{ cookiecutter.project_name.lower().replace(' ', '-') }}",
    "package_name": "{{ cookiecutter.project_slug.replace('-', '_') }}",
    "author_name": "Your Name",
    "author_email": "you@example.com",
    "project_short_description": "A modern and professional Python project.",
    "python_version": "3.11",
    "first_version": "0.1.0",
    "license": ["MIT", "Apache-2.0", "GPL-3.0", "BSD-3-Clause", "None"],
    "github_username": "your_github_username"
}
```

-----

### **各字段详细中文注释**

  * **`"project_name"`**:

      * **作用**: 项目的人类可读名称（展示名），可以包含大小写和空格。
      * **用途**: 会被填充到 `README.md` 的标题、文档首页等位置。
      * **示例**: `My Awesome Project`

  * **`"project_slug"`**:

      * **作用**: 项目的机器可读名称（别名），用于文件夹和URL。
      * **用途**: 将作为新项目**根目录的文件夹名**和**GitHub仓库名**。
      * **说明**: 默认值会自动获取用户输入的 `project_name`，转为小写，并用短横线 `-` 替换空格。

  * **`"package_name"`**:

      * **作用**: Python的可导入包名。
      * **用途**: 这是在`src/`目录下，你的Python源代码包的名称，也是在代码中 `import` 时使用的名字。
      * **说明**: 默认值会自动获取 `project_slug`，并用下划线 `_` 替换短横线 `-`，以符合Python规范。

  * **`"author_name"`**:

      * **作用**: 作者的全名。
      * **用途**: 填充到 `pyproject.toml` 的作者字段和 `LICENSE` 许可证文件中。

  * **`"author_email"`**:

      * **作用**: 作者的联系电子邮箱。
      * **用途**: 填充到 `pyproject.toml` 的联系信息中。

  * **`"project_short_description"`**:

      * **作用**: 项目的一句话简短描述。
      * **用途**: 填充到 `README.md` 和 `pyproject.toml` 的描述字段中。

  * **`"python_version"`**:

      * **作用**: 项目开发和运行所需的最低Python版本。
      * **用途**: 填充到 `pyproject.toml` 的 `requires-python` 字段和CI/CD工作流的配置中。

  * **`"first_version"`**:

      * **作用**: 项目的初始版本号。
      * **用途**: 填充到 `pyproject.toml` 的 `version` 字段中。

  * **`"license"`**:

      * **作用**: 让用户为项目选择一个开源许可证。
      * **用途**: Cookiecutter会以此为菜单，让用户选择。模板可以根据用户的选择，自动生成对应的 `LICENSE` 文件内容。

  * **`"github_username"`**:

      * **作用**: 作者的GitHub用户名。
      * **用途**: 用于在`README.md`和文档中，自动生成指向项目仓库和作者主页的正确链接。










好的，这是与我们最终确定的Cookiecutter模板配套的、一个**完整且功能丰富**的 `pyproject.toml` 文件内容。

它不仅定义了项目的基础信息和依赖，还集成了`Ruff`, `Pytest`, `Coverage`等工具的配置，并正确设置了`src`布局的打包选项。您可以直接将此内容用于您的模板中。

-----

### **完整的 `pyproject.toml` 模板内容**

```toml
# ==============================================================================
# Build system configuration
# ==============================================================================
[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"


# ==============================================================================
# Project metadata (PEP 621)
# ==============================================================================
[project]
name = "{{ cookiecutter.project_name }}"
version = "{{ cookiecutter.first_version }}"
description = "{{ cookiecutter.project_short_description }}"
readme = "README.md"
authors = [
    { name = "{{ cookiecutter.author_name }}", email = "{{ cookiecutter.author_email }}" },
]
license = { text = "{{ cookiecutter.license }}" }
requires-python = ">={{ cookiecutter.python_version }}"
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License", # Adjust if you chose a different license
    "Operating System :: OS Independent",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Topic :: Software Development :: Libraries :: Python Modules",
]

# --- Production Dependencies ---
dependencies = [
    # Examples for a web application. Adjust as needed.
    "fastapi>=0.100.0",
    "uvicorn[standard]>=0.20.0",
    "pydantic>=2.0.0",
    "sqlalchemy>=2.0.0",
    "loguru>=0.7.0",
]

[project.urls]
Homepage = "https://github.com/{{ cookiecutter.github_username }}/{{ cookiecutter.project_slug }}"
Repository = "https://github.com/{{ cookiecutter.github_username }}/{{ cookiecutter.project_slug }}"
"Bug Tracker" = "https://github.com/{{ cookiecutter.github_username }}/{{ cookiecutter.project_slug }}/issues"

# --- Optional Dependencies (for development, testing, etc.) ---
[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "pytest-cov",      # For test coverage
    "httpx",           # For testing FastAPI endpoints
    "ruff",            # Linter and formatter
    "pre-commit",      # Git hooks manager
    "build",           # For building the package
    "twine",           # For publishing to PyPI
    "sphinx",          # For documentation
    "pydantic-settings", # For config management
]

# --- Command-line entry points ---
[project.scripts]
run-app = "{{ cookiecutter.package_name }}.__main__:main"


# ==============================================================================
# Tool Configurations
# ==============================================================================

# --- Setuptools configuration (for src-layout) ---
[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.packages.find]
where = ["src"]

# --- Ruff Linter and Formatter configuration ---
[tool.ruff]
line-length = 88
indent-width = 4
target-version = "py{{ cookiecutter.python_version.replace('.', '') }}" # e.g., "py311"

[tool.ruff.lint]
select = [
    "E",  # pycodestyle errors
    "W",  # pycodestyle warnings
    "F",  # pyflakes
    "I",  # isort
    "B",  # flake8-bugbear
    "C4", # flake8-comprehensions
    "UP", # pyupgrade
    "A",  # flake8-builtins
    "T20",# flake8-print
]
ignore = []

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

# --- Pytest configuration ---
[tool.pytest.ini_options]
minversion = "6.0"
testpaths = [
    "tests/unit",
    "tests/integration",
]
python_files = "test_*.py"
python_functions = "test_*"
python_classes = "Test*"
addopts = [
    "-ra",
    "-q",
    "--cov={{ cookiecutter.package_name }}",
    "--cov-report=term-missing",
    "--cov-fail-under=80", # Enforce 80% test coverage
]

# --- Coverage.py configuration ---
[tool.coverage.run]
source = ["{{ cookiecutter.package_name }}"]
omit = [
    "*/__main__.py", # Often not testable
]

[tool.coverage.report]
show_missing = true
```

-----

### **各配置项作用详解**

  * **`[build-system]`**: 声明项目的构建工具。这里我们使用`setuptools`，它是最通用和强大的选择。
  * **`[project]`**: PEP 621规定的项目核心元数据。
      * `name`, `version`, `description`, `authors`, `license`: 项目的基本信息。
      * `requires-python`: 指定项目兼容的Python版本范围。
      * `classifiers`: PyPI上的分类标签，有助于用户发现你的包。
      * `dependencies`: **生产依赖**。列出了项目在生产环境中运行所必需的包。
  * **`[project.urls]`**: 在PyPI项目页面上显示的附加链接，如项目主页、代码仓库等。
  * **`[project.optional-dependencies]`**: 可选依赖组。
      * `dev`: 我们定义了一个`dev`组，专门存放**开发和测试时才需要**的工具。通过`pip install .[dev]`来安装。
  * **`[project.scripts]`**: 定义命令行工具的入口点。`run-app`是命令名，`{{ cookiecutter.package_name }}.__main__:main`指向要执行的Python函数。
  * **`[tool.setuptools]`**: `setuptools`的专属配置。这两行是实现`src`布局的关键，它告诉`setuptools`要去`src/`目录下寻找Python包。
  * **`[tool.ruff]`**: `Ruff`的配置。在这里你可以统一团队的**代码风格**（`format`部分）和**代码质量**检查规则（`lint`部分）。
  * **`[tool.pytest.ini_options]`**: `Pytest`的配置。
      * `testpaths`: 告诉Pytest去哪些目录下寻找测试文件。
      * `addopts`: Pytest运行时默认添加的命令行参数，这里我们配置了开启覆盖率检查(`--cov`)并设定了80%的最低覆盖率标准(`--cov-fail-under=80`)。
  * **`[tool.coverage.run]`**: `Coverage.py`（由`pytest-cov`使用）的配置，`source`字段明确了只对我们自己的源代码包进行覆盖率计算。

这个`pyproject.toml`文件是您模板的基石，它将确保所有基于此模板创建的项目都具备高度的规范性、一致性和自动化潜力。